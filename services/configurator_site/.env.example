# Environment Configuration
# Copy this file to .env and fill in your values

# ===================================
# Server Configuration
# ===================================
NODE_ENV=development
PORT=3000
LOG_LEVEL=info
HOST=0.0.0.0

# ===================================
# Redis (Temporary Draft Storage)
# ===================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Draft TTL in seconds (default: 24 hours)
DRAFT_TTL_SECONDS=86400

# Refresh TTL on each draft update (true/false)
REFRESH_TTL_ON_UPDATE=true

# ===================================
# PostgreSQL (Permanent Site Storage)
# ===================================
DATABASE_URL=postgresql://sitebuilder:password@localhost:5432/sitebuilder_dev
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ===================================
# Object Storage (S3 / MinIO)
# ===================================
STORAGE_ENDPOINT=http://localhost:9000
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=minioadmin
STORAGE_BUCKET_DRAFTS=draft-assets
STORAGE_BUCKET_PERMANENT=site-assets
STORAGE_REGION=us-east-1
STORAGE_USE_SSL=false

# Public CDN URL (leave empty to use storage endpoint)
STORAGE_PUBLIC_URL=

# ===================================
# Security
# ===================================
# Secret token for server-to-server authentication (commit endpoint)
SERVICE_TOKEN=change-this-to-a-secure-random-string

# CORS allowed origins (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# ===================================
# File Upload Limits
# ===================================
# Maximum logo file size in MB
MAX_LOGO_SIZE_MB=5

# Allowed MIME types (comma-separated)
ALLOWED_LOGO_TYPES=image/png,image/jpeg,image/svg+xml,image/webp

# ===================================
# Preview Configuration
# ===================================
# Base URL for preview links
PREVIEW_BASE_URL=http://localhost:3000

# ===================================
# Rate Limiting
# ===================================
# Maximum draft creations per IP per hour
RATE_LIMIT_DRAFTS_PER_HOUR=10

# Maximum asset uploads per IP per hour
RATE_LIMIT_UPLOADS_PER_HOUR=20

# ===================================
# Cleanup Job
# ===================================
# Cron schedule for draft cleanup job (if using DB-based TTL)
# Format: "second minute hour day month weekday"
# Default: every 6 hours at minute 0
CLEANUP_CRON_SCHEDULE=0 0 */6 * * *

# Enable background cleanup job (true/false)
ENABLE_CLEANUP_JOB=false

# ===================================
# Feature Flags
# ===================================
# Enable preview caching to S3
ENABLE_PREVIEW_CACHING=false

# Auto-generate color palette from logo
ENABLE_COLOR_EXTRACTION=true
